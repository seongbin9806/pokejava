<div id="battle" class="sideView hideView">
    <div class="screen">
        <div class="captureRate">포획률: 0%</div>
        <div class="pokemonArea">
            <img class="pokemon" src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/26.png" alt="포획할 포켓몬">
            <div class="pokemonName">라이츄</div>
        </div>
        <div class="textBox">
            야생의 라이츄가 나타났다!
        </div>
        <div class="buttonBox">
            <button onclick="showInputField()">문제를 푼다</button>
            <button onclick="runAway()">도망간다</button>
        </div>
        <div class="inputBox">
            <input type="text" id="answerInput" placeholder="답을 입력하세요">
            <button onclick="checkAnswer()">입력</button>
        </div>
    </div>
</div>

<script>
    let captureRate = 0;
    let correctAnswers = 0;

    function showInputField() {
        document.querySelector('.buttonBox').style.display = 'none';
        document.querySelector('.inputBox').style.display = 'flex';
        document.querySelector('.textBox').textContent = '문제: 라이츄의 진화 전 포켓몬은?';
    }

    function runAway() {
        document.querySelector('.textBox').textContent = '무사히 도망쳤다!';
        common.showView('field');
    }

    function checkAnswer() {
        const userAnswer = document.getElementById('answerInput').value.toLowerCase();
        if (userAnswer === '피카츄') {
            correctAnswers++;
            captureRate = Math.min(100, correctAnswers * 25);
            document.querySelector('.captureRate').textContent = `포획률: ${captureRate}%`;
            document.querySelector('.textBox').textContent = '정답! 피카츄가 라이츄로 진화합니다.';

            setTimeout(() => {
              common.showView('field');
            }, 2500);
        } else {
            document.querySelector('.textBox').textContent = '틀렸습니다. 다시 시도해보세요.';
        }
        document.querySelector('.inputBox').style.display = 'none';
        document.querySelector('.buttonBox').style.display = 'flex';
        document.getElementById('answerInput').value = '';
    }
</script>